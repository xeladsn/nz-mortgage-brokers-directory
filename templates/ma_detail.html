<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ ma.name }} - MA Details</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <header>
        <nav>
            <ul>
                <li><a href="{{ url_for('home') }}"><img src="{{ url_for('static', filename='logo.png') }}" alt="Logo" class="logo"></a></li>
                <li><a href="#">About Us</a></li>
                <li>
                    <div class="dropdown">
                        <button class="dropbtn">Specialty ‚ñº</button>
                        <div class="dropdown-content">
                            {% for route, name in specialty_routes.items() %}
                            <a href="{{ url_for('specialty', type=route) }}">{{ name }}</a>
                            {% endfor %}
                        </div>
                    </div>
                </li>
                <li>
                    <div class="dropdown">
                        <button class="dropbtn">Service ‚ñº</button>
                        <div class="dropdown-content">
                            {% for route, name in service_routes.items() %}
                            <a href="{{ url_for('service', type=route) }}">{{ name }}</a>
                            {% endfor %}
                        </div>
                    </div>
                </li>
                <li><a href="#">Most Recommended</a></li>
            </ul>
        </nav>
        <div class="auth-buttons">
            <a href="#" class="button">Find MAs</a>
            <a href="#" class="button">Log in</a>
        </div>
    </header>

    <main class="ma-detail">
        <div class="advisor-header">
            <img src="{{ url_for('static', filename=ma.profile_picture) }}" alt="{{ ma.name }}" class="advisor-picture">
            <div class="advisor-info">
                <h1>{{ ma.name }}</h1>
                <p class="company">{{ ma.company }}</p>
            </div>
        </div>
        <div class="actions">
            <button class="contact-btn">Contact</button>
            <button class="favorite">‚ù§</button>
            <button class="share">Share</button>
        </div>
        <div class="description-section">
            <p class="short-description">{{ ma.description }}</p>
            <p class="detailed-description">{{ ma.detailed_description }}</p>
        </div>
        <div class="social-links">
            {% if ma.website %}<a href="{{ ma.website }}" target="_blank">üåê</a>{% endif %}
            {% if ma.linkedin %}<a href="{{ ma.linkedin }}" target="_blank">in</a>{% endif %}
        </div>

        <section>
            <h2>Specialties</h2>
            <div class="tags">
                {% for tag in ma.tags %}
                <a href="{{ url_for('specialty', type=reverse_specialty_routes[tag]) }}" class="tag">{{ tag }}</a>
                {% endfor %}
            </div>
        </section>

        <section>
            <h2>Services</h2>
            <div class="tags">
                {% for service in ma.services %}
                <a href="{{ url_for('service', type=reverse_service_routes[service]) }}" class="tag">{{ service }}</a>
                {% endfor %}
            </div>
        </section>

        <section>
            <h2>About {{ ma.name }}</h2>
            <div class="about-grid">
                <div>
                    <strong>Location</strong>
                    <p>{{ ma.location }}</p>
                </div>
                <div>
                    <strong>Service Area</strong>
                    <p>{% if ma.nationwide %}Nationwide{% else %}Local{% endif %}</p>
                </div>
                <div>
                    <strong>Years of Experience</strong>
                    <p>{{ ma.years_experience }}</p>
                </div>
                <div>
                    <strong>Online Capability</strong>
                    <p>{% if ma.online_capable %}Yes{% else %}No{% endif %}</p>
                </div>
                <div>
                    <strong>Supported Institutions</strong>
                    <p>{{ ma.supported_institutions|join(', ') }}</p>
                </div>
            </div>
        </section>

        <section>
            <h2>Endorsements</h2>
            <div class="endorsements">
                {% for endorsement in ma.endorsements %}
                <div class="endorsement">
                    <div class="endorsement-picture-container">
                        <img src="{{ url_for('static', filename=endorsement.picture) }}" alt="{{ endorsement.name }}" class="endorsement-picture">
                        <div class="linkedin-watermark">in</div>
                    </div>
                    <div class="endorsement-text">
                        <p>"{{ endorsement.comment }}"</p>
                        <p>- {{ endorsement.name }}, {{ endorsement.date }}</p>
                        <p>{{ endorsement.title }}</p>
                    </div>
                </div>
                {% endfor %}
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2024 Kiwi Homebuyers. All rights reserved.</p>
    </footer>
    <div id="contactModal" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Contact {{ ma.name }}</h2>
            <form id="contactForm">
              <input type="hidden" id="ma_id" name="ma_id" value="{{ ma.id }}">

              <label for="email">Your Email:</label>
              <input type="email" id="email" name="email" required>

              <label for="first_name">First Name:</label>
              <input type="text" id="first_name" name="first_name" required>

              <label for="last_name">Last Name:</label>
              <input type="text" id="last_name" name="last_name" required>

              <label for="profession">Profession:</label>
              <input type="text" id="profession" name="profession" required>

              <label for="household_income">Household Tax Income:</label>
              <input type="text" id="household_income" name="household_income" required>

              <button type="submit">Send Message</button>
            </form>
      </div>
    </div>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>