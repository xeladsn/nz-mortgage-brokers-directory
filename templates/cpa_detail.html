<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ cpa.name }} - CPA Details</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <header>
        <nav>
            <ul>
                <li><img src="{{ url_for('static', filename='logo.png') }}" alt="Logo" class="logo"></li>
                <li><a href="#">About Us</a></li>
                <li>
                    <div class="dropdown">
                        <button class="dropbtn">Specialty ‚ñº</button>
                        <div class="dropdown-content">
                            <a href="{{ url_for('specialty', type='first-home-buyer') }}">First Home Buyer</a>
                            <a href="{{ url_for('specialty', type='property-investor') }}">Property Investor</a>
                            <a href="{{ url_for('specialty', type='self-employed') }}">Self-Employed</a>
                            <a href="{{ url_for('specialty', type='bad-credit-history') }}">Bad Credit History</a>
                            <a href="{{ url_for('specialty', type='refinancing') }}">Refinancing</a>
                            <a href="{{ url_for('specialty', type='new-to-nz') }}">New to NZ</a>
                            <a href="{{ url_for('specialty', type='high-net-worth-individual') }}">High Net Worth Individual</a>
                            <a href="{{ url_for('specialty', type='commercial-property') }}">Commercial Property</a>
                        </div>
                    </div>
                </li>
                <li>
                    <div class="dropdown">
                        <button class="dropbtn">Service ‚ñº</button>
                        <div class="dropdown-content">
                            <a href="{{ url_for('service', type='home-loans') }}">Home Loans</a>
                            <a href="{{ url_for('service', type='investment-property-loans') }}">Investment Property Loans</a>
                            <a href="{{ url_for('service', type='construction-loans') }}">Construction Loans</a>
                            <a href="{{ url_for('service', type='refinancing') }}">Refinancing</a>
                            <a href="{{ url_for('service', type='debt-consolidation') }}">Debt Consolidation</a>
                            <a href="{{ url_for('service', type='kiwisaver-first-home-withdrawals') }}">KiwiSaver First Home Withdrawals</a>
                            <a href="{{ url_for('service', type='welcome-home-loan-scheme') }}">Welcome Home Loan Scheme</a>
                            <a href="{{ url_for('service', type='commercial-property-finance') }}">Commercial Property Finance</a>
                        </div>
                    </div>
                </li>
                <li><a href="#">Most Recommended</a></li>
            </ul>
        </nav>
        <div class="auth-buttons">
            <a href="#" class="button">Find CPAs</a>
            <a href="#" class="button">Log in</a>
        </div>
    </header>

    <main class="cpa-detail">
        <h1>{{ cpa.name }} <span class="checkmark">‚úì</span></h1>
        <div class="actions">
            <button class="favorite">‚ù§</button>
            <button class="contact-btn">Contact</button>
            <button class="share">Share</button>
        </div>
        <p>{{ cpa.description }}</p>
        <div class="social-links">
            {% if cpa.website %}<a href="{{ cpa.website }}" target="_blank">üåê</a>{% endif %}
            {% if cpa.linkedin %}<a href="{{ cpa.linkedin }}" target="_blank">in</a>{% endif %}
        </div>

        <section>
            <h2>Supported client types</h2>
            <div class="tags">
                {% for client_type in cpa.client_types %}
                <span class="tag">{{ client_type }}</span>
                {% endfor %}
            </div>
        </section>

        <section>
            <h2>Specialties</h2>
            <div class="tags">
                {% for tag in cpa.tags %}
                <a href="{{ url_for('specialty', type=tag.lower().replace(' ', '-')) }}" class="tag">{{ tag }}</a>
                {% endfor %}
            </div>
        </section>

        <section>
            <h2>Services</h2>
            <div class="tags">
                {% for service in cpa.services %}
                <a href="{{ url_for('service', type=service.lower().replace(' ', '-')) }}" class="tag">{{ service }}</a>
                {% endfor %}
            </div>
        </section>

        <section>
            <h2>About {{ cpa.name }}</h2>
            <div class="about-grid">
                <div>
                    <strong>Employees</strong>
                    <p>{{ cpa.employees }}</p>
                </div>
                <div>
                    <strong>Founding year</strong>
                    <p>{{ cpa.founding_year }}</p>
                </div>
                <div>
                    <strong>Rate range</strong>
                    <p>{{ cpa.rate_range }}</p>
                </div>
                <div>
                    <strong>Location</strong>
                    <p>{{ cpa.location }}</p>
                </div>
                <div>
                    <strong>Support</strong>
                    <p>{{ cpa.support }}</p>
                </div>
                <div>
                    <strong>Software</strong>
                    <p>{{ cpa.software }}</p>
                </div>
            </div>
        </section>

        <section>
            <h2>Endorsements</h2>
            <div class="endorsements">
                {% for endorsement in cpa.endorsements %}
                <div class="endorsement">
                    <p>"{{ endorsement.comment }}"</p>
                    <p>- {{ endorsement.name }}, {{ endorsement.date }}</p>
                    <p>{{ endorsement.title }}</p>
                </div>
                {% endfor %}
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2024 Sam's List. All rights reserved.</p>
    </footer>
    <div id="contactModal" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Contact {{ cpa.name }}</h2>
            <form id="contactForm">
              <input type="hidden" id="cpa_id" name="cpa_id" value="{{ cpa.id }}">

              <label for="email">Your Email:</label>
              <input type="email" id="email" name="email" required>

              <label for="first_name">First Name:</label>
              <input type="text" id="first_name" name="first_name" required>

              <label for="last_name">Last Name:</label>
              <input type="text" id="last_name" name="last_name" required>

              <label for="profession">Profession:</label>
              <input type="text" id="profession" name="profession" required>

              <label for="household_income">Household Tax Income:</label>
              <input type="text" id="household_income" name="household_income" required>

              <button type="submit">Send Message</button>
            </form>
      </div>
    </div>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>